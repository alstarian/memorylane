<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Match Lab: FLAMES & Vedic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --card: #0f172a;
      --accent: #f97316;
      --accent-soft: rgba(249,115,22,0.15);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f87171;
      --radius: 14px;
      --shadow-soft: 0 18px 40px rgba(15,23,42,0.7);
      --border-subtle: 1px solid rgba(148,163,184,0.25);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at 0% 0%, #1f2937 0, rgba(15,23,42,0) 55%),
        radial-gradient(circle at 100% 100%, #7c2d12 0, rgba(15,23,42,0) 55%),
        var(--bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow: hidden;
      position: relative;
    }

    /* --- APP SHELL & LAYOUT --- */
    .app-shell {
      width: 100%;
      max-width: 720px;
      background: radial-gradient(circle at top, rgba(148,163,184,0.35), transparent 55%),
                  rgba(15,23,42,0.96);
      border-radius: 22px;
      border: 1px solid rgba(148,163,184,0.35);
      box-shadow: 0 28px 70px rgba(15,23,42,0.9);
      padding: 24px 24px 20px;
      backdrop-filter: blur(18px);
      position: relative;
      overflow: hidden;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .title-stack { display: flex; flex-direction: column; gap: 4px; }

    .app-title {
      font-size: 24px;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      font-weight: 700;
      color: #fff;
    }

    .chip {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--accent);
      opacity: 0.9;
    }

    .flame-orb {
      width: 42px; height: 42px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 0%, #f97316, #b91c1c 60%, #020617);
      box-shadow: 0 0 22px rgba(248,113,22,0.6);
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 16px;
    }

    @media (max-width: 700px) {
      .layout { grid-template-columns: 1fr; }
    }

    /* --- PANELS & INPUTS --- */
    .panel {
      border-radius: var(--radius);
      background: rgba(15,23,42,0.6);
      border: var(--border-subtle);
      padding: 16px;
      position: relative;
    }

    .panel h2 {
      margin: 0 0 12px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      display: flex; justify-content: space-between;
    }

    .input-pair { display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px; }
    
    .field label {
      display: block;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--muted);
      margin-bottom: 5px;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      border-radius: 9px;
      border: 1px solid rgba(148,163,184,0.3);
      background: rgba(15,23,42,0.8);
      color: var(--text);
      font-size: 14px;
      outline: none;
      transition: all 0.2s;
    }
    input[type="text"]:focus {
      border-color: var(--accent);
      background: rgba(15,23,42,0.95);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.3);
    }

    /* --- CONTROLS --- */
    .actions-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .mode-selector { flex: 1; min-width: 140px; }

    .mode-select {
      width: 100%;
      appearance: none;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: #e5e7eb;
      padding: 9px 30px 9px 12px;
      border-radius: 99px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      /* Custom Arrow SVG */
      background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      transition: border-color 0.2s;
    }
    .mode-select:focus { border-color: var(--accent); outline: none; }

    .btn-row { display: flex; gap: 8px; }

    button {
      border-radius: 99px;
      border: 1px solid transparent;
      padding: 9px 16px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: linear-gradient(135deg, #f97316, #fb923c);
      color: #111827;
      box-shadow: 0 4px 12px rgba(249,115,22,0.3);
    }
    .btn-primary:hover { background: linear-gradient(135deg, #fb923c, #fdba74); }

    .btn-ghost {
      background: rgba(15,23,42,0.6);
      border-color: rgba(148,163,184,0.4);
      color: var(--muted);
    }
    .btn-ghost:hover { border-color: #fff; color: #fff; }

    .hint {
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px dashed rgba(255,255,255,0.1);
      font-size: 11px;
      color: var(--muted);
      line-height: 1.4;
    }
    .hint strong { color: #e5e7eb; }

    /* --- RESULTS --- */
    .result-shell {
      text-align: center;
      padding: 10px 0;
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .result-shell.reveal { opacity: 1; transform: scale(1); }

    /* FLAMES VIEW */
    .flame-badge { margin-bottom: 10px; }
    .flame-letter {
      width: 64px; height: 64px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 0%, #f97316, #b91c1c 65%, #020617);
      display: inline-flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 32px; color: #fff;
      box-shadow: 0 0 25px rgba(248,113,22,0.5);
    }

    /* VEDIC VIEW */
    .vedic-badge {
      display: flex; flex-direction: column; align-items: center; gap: 5px;
      margin-bottom: 10px;
    }
    .planet-icon { font-size: 36px; animation: float 3s ease-in-out infinite; }
    .num-display {
      font-size: 56px; font-weight: 800;
      background: linear-gradient(135deg, #a78bfa, #c084fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 12px rgba(167,139,250,0.3));
    }
    @keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-6px);} }

    .relationship {
      font-size: 16px; font-weight: 700;
      text-transform: uppercase; letter-spacing: 0.1em;
      margin-bottom: 6px; color: #fff;
    }
    .relationship span { color: #fed7aa; }

    .relationship-detail { font-size: 12px; color: var(--muted); margin-bottom: 12px; }

    .tags { display: flex; flex-wrap: wrap; justify-content: center; gap: 6px; }
    .tag {
      font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em;
      padding: 3px 8px; border-radius: 10px;
      background: rgba(255,255,255,0.05); color: var(--muted);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .error { color: var(--danger); font-size: 11px; margin-top: 8px; }

    /* --- FOOTER & CONFETTI --- */
    .footer {
      margin-top: 15px;
      font-size: 10px;
      color: rgba(148,163,184,0.4);
      text-align: center;
      letter-spacing: 0.05em;
    }

    .confetti-container { position: fixed; inset: 0; pointer-events: none; z-index: 99; }
    .confetti { position: absolute; font-size: 20px; animation: fall 3s linear forwards; }
    @keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
  </style>
</head>
<body>

  <div class="confetti-container" id="confettiContainer"></div>

  <div class="app-shell">
    <header class="app-header">
      <div class="title-stack">
        <div class="app-title">Match Lab</div>
        <div class="chip">Name Compatibility</div>
      </div>
      <div class="flame-orb">üî•</div>
    </header>

    <main class="layout">
      <!-- INPUT SECTION -->
      <section class="panel">
        <h2>
          <span>Enter Names</span>
          <span style="opacity:0.5; font-size:9px;">Step 1</span>
        </h2>

        <div class="input-pair">
          <div class="field">
            <label>Name One</label>
            <input type="text" id="name1" placeholder="e.g. Ali Hassan" />
          </div>
          <div class="field">
            <label>Name Two</label>
            <input type="text" id="name2" placeholder="e.g. Sidra Zaidi" />
          </div>
        </div>

        <div class="actions-row">
          <div class="mode-selector">
            <select id="gameMode" class="mode-select">
              <option value="flames">üî• Classic FLAMES</option>
              <option value="vedic">üïâÔ∏è Vedic / Indian System</option>
            </select>
          </div>
          
          <div class="btn-row">
            <button class="btn-ghost" id="resetBtn">Reset</button>
            <button class="btn-primary" id="matchBtn">Reveal</button>
          </div>
        </div>

        <p class="hint" id="modeHint">
          Uses classic letter-crossing logic for a fun match.
        </p>

        <div id="error" class="error"></div>
      </section>

      <!-- RESULT SECTION -->
      <aside class="panel">
        <h2>
          <span>Result</span>
          <span style="opacity:0.5; font-size:9px;">Step 2</span>
        </h2>
        
        <div class="result-shell" id="resultShell">
          
          <!-- FLAMES Output (Visible by default) -->
          <div id="flamesView">
            <div class="flame-badge">
              <span class="flame-letter" id="flameLetter">-</span>
            </div>
          </div>

          <!-- Vedic Output (Hidden by default) -->
          <div id="vedicView" style="display: none;">
            <div class="vedic-badge">
              <span class="planet-icon" id="planetIcon">ü™ê</span>
              <span class="num-display" id="vedicNumber">?</span>
            </div>
          </div>

          <div class="relationship">
            <span id="resultLabel">Waiting...</span>
          </div>
          
          <div class="relationship-detail" id="resultDetail">
            Select a mode, enter names, and click Reveal.
          </div>

          <div class="tags" id="tagsRow">
            <span class="tag">Ready</span>
          </div>
        </div>
      </aside>
    </main>
    
    <footer class="footer">
      üîí Privacy Friendly ‚Ä¢ No Data Stored ‚Ä¢ Client-side Only
    </footer>
  </div>

<script>
    // --- 1. CONFIGURATION & DATA ---

    // Classic FLAMES Data
    const FLAMES_MAP = {
      F: { label: "Friends", detail: "Strong buddy energy. Expect memes and late-night chats.", tags: ["Platonic", "Trusted"] },
      L: { label: "Love", detail: "Soft-focus filter unlocked. Romantic potential detected.", tags: ["Crush", "Heart Eyes"] },
      A: { label: "Affection", detail: "Warm and caring connection. Supportive vibes.", tags: ["Comfort", "Soft"] },
      M: { label: "Marriage", detail: "Long-term storyline. Commitment and stability.", tags: ["Endgame", "Power Duo"] },
      E: { label: "Enemies", detail: "Spicy dynamic. Rivalry, banter, or clashing personalities.", tags: ["Frenemies", "Clash"] },
      S: { label: "Siblings", detail: "Teasing but protective. Family-coded energy.", tags: ["Chaos", "Caring"] }
    };

    // Chaldean (Vedic) Data
    // Note: No letter is assigned the number 9.
    const VEDIC_MAP = {
      a: 1, i: 1, j: 1, q: 1, y: 1,
      b: 2, k: 2, r: 2,
      c: 3, g: 3, l: 3, s: 3,
      d: 4, m: 4, t: 4,
      e: 5, h: 5, n: 5, x: 5,
      u: 6, v: 6, w: 6,
      o: 7, z: 7,
      f: 8, p: 8
    };

    const VEDIC_MEANINGS = {
      1: { planet: "‚òÄÔ∏è", label: "Sun (Surya)", detail: "Power couple. High ego, leadership, and ambition.", tags: ["Royalty", "Fire"] },
      2: { planet: "üåô", label: "Moon (Chandra)", detail: "Emotional connection. Intuitive, moody, and deep.", tags: ["Water", "Soul"] },
      3: { planet: "‚ö°", label: "Jupiter (Guru)", detail: "Wisdom match. Growth, learning, and luck.", tags: ["Expansion", "Luck"] },
      4: { planet: "‚òÑÔ∏è", label: "Rahu", detail: "Unconventional bond. Breaks rules, electric energy.", tags: ["Wildcard", "Rebel"] },
      5: { planet: "üó£Ô∏è", label: "Mercury (Budha)", detail: "Intellectual match. Great communication and wit.", tags: ["Chatty", "Smart"] },
      6: { planet: "üíé", label: "Venus (Shukra)", detail: "Romance & Luxury. Passionate and aesthetic.", tags: ["Love", "Beauty"] },
      7: { planet: "üßò", label: "Ketu", detail: "Spiritual bond. Detached from worldly drama.", tags: ["Mystic", "Deep"] },
      8: { planet: "ü™ê", label: "Saturn (Shani)", detail: "Serious bond. Slow burn, requires patience.", tags: ["Karma", "Stable"] },
      9: { planet: "‚öîÔ∏è", label: "Mars (Mangal)", detail: "High energy. Passionate, impulsive, and driven.", tags: ["Action", "Heat"] }
    };

    // --- 2. DOM ELEMENTS ---
    const name1Input = document.getElementById("name1");
    const name2Input = document.getElementById("name2");
    const matchBtn = document.getElementById("matchBtn");
    const resetBtn = document.getElementById("resetBtn");
    const modeSelect = document.getElementById("gameMode");
    const modeHint = document.getElementById("modeHint");
    const errorEl = document.getElementById("error");

    const resultShell = document.getElementById("resultShell");
    const flamesView = document.getElementById("flamesView");
    const vedicView = document.getElementById("vedicView");

    const resultLabel = document.getElementById("resultLabel");
    const resultDetail = document.getElementById("resultDetail");
    const tagsRow = document.getElementById("tagsRow");

    // Specific Output Elements
    const flameLetterEl = document.getElementById("flameLetter");
    const vedicNumberEl = document.getElementById("vedicNumber");
    const planetIconEl = document.getElementById("planetIcon");

    // --- 3. UTILITY & LOGIC ---

    function normalize(str) {
      return str.toLowerCase().replace(/[^a-z]/g, "");
    }

    function createConfetti() {
      const container = document.getElementById("confettiContainer");
      const icons = ["‚ú®", "‚ù§Ô∏è", "üî•", "üîÆ", "‚ö°"];
      for(let i=0; i<30; i++) {
        const el = document.createElement("div");
        el.className = "confetti";
        el.textContent = icons[Math.floor(Math.random() * icons.length)];
        el.style.left = Math.random() * 100 + "vw";
        el.style.animationDuration = (Math.random() * 2 + 2) + "s";
        container.appendChild(el);
        setTimeout(() => el.remove(), 4000);
      }
    }

    // --- FLAMES LOGIC ---
    function runFlames(n1, n2) {
      let a = n1.split("");
      let b = n2.split("");
      
      // Cancel matches
      for(let i=0; i<a.length; i++) {
        const idx = b.indexOf(a[i]);
        if(idx !== -1) {
          a[i] = "";
          b[idx] = "";
        }
      }
      
      const count = a.join("").length + b.join("").length;
      if (count === 0) return "S";

      const arr = ["F", "L", "A", "M", "E", "S"];
      let idx = 0;
      let steps = count;
      let workingArr = [...arr];

      while (workingArr.length > 1) {
        idx = (idx + steps - 1) % workingArr.length;
        workingArr.splice(idx, 1);
      }
      return workingArr[0];
    }

    // --- VEDIC LOGIC (H=5) ---
    function getVedicSum(name) {
      let sum = 0;
      for (let char of name) {
        if (VEDIC_MAP[char]) sum += VEDIC_MAP[char];
      }
      while (sum > 9) {
        sum = String(sum).split('').reduce((a,b) => parseInt(a)+parseInt(b), 0);
      }
      return sum;
    }

    function runVedic(n1, n2) {
      const v1 = getVedicSum(n1);
      const v2 = getVedicSum(n2);
      let total = v1 + v2;
      while (total > 9) {
        total = String(total).split('').reduce((a,b) => parseInt(a)+parseInt(b), 0);
      }
      return total;
    }

    // --- 4. EVENT HANDLERS ---

    // Update hint text based on selection
    modeSelect.addEventListener("change", function() {
      if (this.value === 'flames') {
        modeHint.textContent = "Uses classic letter-crossing logic for a fun match.";
      } else {
        modeHint.innerHTML = "Uses the <strong>Chaldean (Vedic)</strong> system.<br>Favoured by Indian Astrologers (e.g. H=5).";
      }
    });

    // Run Match
    matchBtn.addEventListener("click", function() {
      const raw1 = name1Input.value;
      const raw2 = name2Input.value;
      const clean1 = normalize(raw1);
      const clean2 = normalize(raw2);
      const mode = modeSelect.value;

      errorEl.textContent = "";

      if (!clean1 || !clean2) {
        errorEl.textContent = "Please enter two valid names.";
        return;
      }

      // 1. Reset Animation
      resultShell.classList.remove("reveal");
      
      // 2. Process Result
      setTimeout(() => {
        resultShell.classList.add("reveal");
        createConfetti();

        if (mode === 'flames') {
          // Show FLAMES
          flamesView.style.display = "block";
          vedicView.style.display = "none";
          
          const letter = runFlames(clean1, clean2);
          const data = FLAMES_MAP[letter];
          
          flameLetterEl.textContent = letter;
          resultLabel.textContent = data.label;
          resultDetail.textContent = data.detail;
          
          tagsRow.innerHTML = "";
          data.tags.forEach(t => {
            tagsRow.innerHTML += `<span class="tag">${t}</span>`;
          });

        } else {
          // Show Vedic
          flamesView.style.display = "none";
          vedicView.style.display = "block";
          
          const number = runVedic(clean1, clean2);
          const data = VEDIC_MEANINGS[number];
          
          vedicNumberEl.textContent = number;
          planetIconEl.textContent = data.planet;
          resultLabel.textContent = data.label;
          resultDetail.textContent = data.detail;
          
          tagsRow.innerHTML = "";
          data.tags.forEach(t => {
            tagsRow.innerHTML += `<span class="tag">${t}</span>`;
          });
        }
      }, 50);
    });

    // Reset UI
    resetBtn.addEventListener("click", function() {
      name1Input.value = "";
      name2Input.value = "";
      errorEl.textContent = "";
      resultShell.classList.remove("reveal");
      resultLabel.textContent = "Waiting...";
      resultDetail.textContent = "Select a mode, enter names, and click Reveal.";
      tagsRow.innerHTML = '<span class="tag">Ready</span>';
    });

    // Enter Key Support
    [name1Input, name2Input].forEach(function(input, index) {
      input.addEventListener("keydown", function(e) {
        if (e.key === "Enter") {
          e.preventDefault();
          if (index === 0) name2Input.focus();
          else matchBtn.click();
        }
      });
    });
</script>
</body>
</html>
